
-<-<-<-<-<   toc.conf

header.md
introduction.md
contributing-to-an-open-jdk-project.md
mailing-lists.md
code-conventions.md
jbs-jdk-bug-system.md
fixing-a-bug.md
cloning-the-jdk.md
building-the-jdk.md
testing-the-jdk.md
working-with-pull-requests.md
backporting.md
release-notes.md
the-jdk-release-process.md
the-jep-process.md
project-maintenance.md
hotspot-development.md
working-with-the-legacy-mercurial-servers.md
code-owners.md
about-this-guide.md
glossary.md

<-<-<-<-<-<-<-<-<-

----- Rekommendationer från Mark om hur texten ska skrivas etc.

# The JEP Process

A JEP (Java Enhancement Proposal) is a document describing an intended change in Java or the JDK. A JEP should contain all information needed to be able to make a decision on wether the JEP should be implemented or not, and enough information to serve as documentation for the proposed change.

JEPs are in general used for larger changes. The formal criteria is that a JEP is required for changes to the JDK code base that meet at least one of the following:

* It's expected to take a minimum of 2 weeks of development effort
* It makes a significant change to the JDK, or to the processes and infrastructure by which it's developed
* It's in high demand by developers or customers

These should be interpreted as "any larger change that requires or deserves broad attention". A bug that is tricky to solve may well take more than 2 weeks of work but in the end it's still "just" a bugfix and is unlikely to require or deserve the attention generated by a JEP. The same goes for minor enhancements like a source code cleanup or fixing the code to adhere to a new compiler version.

## Creating a JEP

The JEP documents are developed and stored in [JBS](https://bugs.openjdk.java.net). There's a special issue type, [JEP]{.jbs-value}, that is used for these documents to separate them from bugs and enhancements. To create a new one, just create an issue of type [JEP]{.jbs-value} in the project where the final integration of the change is planned.

The following is a guide to the JBS fields to be filled out.

| Field | Required? | Description |
|:-|:-|:--------------------------|
| Assignee    | No  | The person who has the next action to move this JEP forward (usually but not necessarily the owner). |
| Author      | Yes | Author's full name (no e-mail address).  May include multiple names. |
| Component / Subcomponent | Yes | Use "Unknown" for the component name if more than one component in an area is significantly affected, or if some component not listed here is affected. |
| Description | Yes | Use markdown template.  **Is there a specific template?** |
| Discussion  | Yes | Mailing list for discussion of this JEP (e.g. net dash dev at openjdk dot org). |
| Duration    | No  | The duration reflects the calendar time needed to complete the proposed work (includes both dev and SQE).  It can be more or less than the effort estimate. Rough duration estimate, one of:<br>* XS -- Less than one month (calendar)<br>* S  -- Less than three months<br>* M  -- Less than six months<br>* L  -- Less than one year<br>* XL -- More than one year |
| Effort      | Yes | Rough effort estimate, one of:<br>* XS -- Less than one developer-month (20 working days)<br>* S  -- Less than three dev-months<br>* M  -- Less than six dev-months<br>* L  -- Less than one dev-year<br>* XL -- More than one dev-year |
| Issue Type  | Yes | JEP |
| Fix Version | No  | Do not set the fix version until you are ready to Propose to Target |
| JEP Type    | Yes | Choices are:<br>* Feature -- A feature intended eventually for a JDK Release Project<br>* Infrastructure -- A proposal to provide or enhance infrastructure<br>* Informational -- Not typically used by most developers. Examples are coding guidelines, supported platforms for JDK 9, where the intent is to inform, not to track work.<br>* Process -- A proposal to define or revise a development process<br>Most JEPs will be of type Feature. |
| JSR         | No  | If this JEP will have a JSR then include this line and insert its number.  If this JEP is expected to have a JSR but is not yet approved as such in the JCP then write "TBD" for the number.  If this JEP will be part of a Maintenance Review of an existing JSR then insert its number followed by "MR", e.g., "JSR: 221 MR".  Do not include this line if this JEP describes a small enhancement that will be covered by a Platform Umbrella JSR.<br>If you still don't understand what this field is, you most likely do not need it. |
| Owner       | Yes | Typically same as the Author, unless the Author is not a Committer in which case the Owner is a Committer that would push changes for the Author. |
| Priority    | Yes | The suggested or agreed-on priority of this JEP. |
| Scope | Only for Feature JEPs | Choices are:  * SE -- Java SE APIs or other interfaces modified or extended;  * JDK -- JDK-specific APIs or other interfaces modified or extended  * Impl -- Implementation only.  No supported APIs or interfaces are affected |
| Summary     | Yes | Short descriptive title of the proposal. |

### Additional Tips

* Follow the template. Follow it exactly. Make sure that you have all of the required sections, that you do not have any sections not in the template, that the sections are in the correct order, and that you use exactly the Markdown syntax shown in the template. Using the same overall structure for all JEPs makes them easy to review and easy to read, so please focus your creativity on the content of your JEP rather than its structure. If you submit a JEP that does not follow the template then it will be returned to the Draft state upon review. The advice in the template evolves over time, so do not assume that a copy of it that you made months or years ago is still current.
* Use the appropriate Markdown syntax for hyperlinks.  Enclose inline code fragments, class names, etc., in `backquotes`.
* Take the time to craft a short, descriptive title. Noun phrases are generally best: "Multi-Modal Frobs" is better than "Support a Multi-Modal Frob API".
* Take the time to craft actual, readable prose. A dump of the bullet items from a set of PowerPoint slides will be rejected. If you're not comfortable writing English prose then seek help from someone who is.
* Make sure that your text is understandable to non-specialists. Define acronyms upon first use if they're not widely known.

## Pre-submission: Conceptual Review of Draft JEPs

### Initial JEP Review

Once the JEP description has been filled out and the owner is ready for it to be reviewed.

Send a link to the draft JEP to the component OpenJDK mailing list for conceptual feedback  (e.g., is it a good idea to be working on this JEP?  Should it be in our backlog?).  This does not need to be a fully formed JEP (this is a work in progress) but must have the required fields.  Design details can be included but are not required but you understand the general direction.

:::{.note}
If you are almost ready for a code-review, you should have Submitted it earlier.    In fact you should not be having a code review if a JEP is not in Candidate state (it should be done in the JEP Development phase).
:::

### Final Conceptual Review before Submitting a JEP  

The JEP must be reviewed by the area architect (e.g., marked "Reviewed-by: Brian Goetz"), you can move the status of the JEP to "Submitted".  The JEP will be reviewed by the OpenJDK Lead (Mark Reinhold) and when he has approved the JEP, he will move it to status=Candidate.

| Reviewed-by: | Full names of the Reviewers of this proposal, comma-separated. Must include area lead for this component area. | REQUIRED before moving status to Submitted |

## JEP Development

### Adding Development and Test Sub-tasks  

* Add sub-tasks or linked tasks to cover Development and Test work.  
  * It's recommended to create fine-grained enough tasks so you can show incremental progress and allow for a more agile development process.  Good descriptions will allow stakeholders to understand what is being planned so they can assess the impact of this JEP on their areas.
  * Most JEPs should have a "Testing" section, which covers the kinds of test development and execution required in order to validate this enhancement, beyond the usual mandatory unit tests. It may also be useful to have "test plan" sub-task  to describe test development and/or test execution in more details than provided in the "Testing" section.  The intent of the test plan is to also to spell out Test Success Criteria (e.g., code coverage rate, stress/load/endurance/reliability requirements, test stability).
* Examples
  * JEP 220: Modular Run-Time Images
  * JEP 277: Enhanced Deprecation example

### Compatibility and Specification Review (CSR)

A CSR tracks every change to every interface that is exported or imported by Java SE and is either external or private.  (The CSR does not track changes  to internal interfaces.)  A CSR also tracks any change that has potential compatibility impact (including behavioral changes).  More precisely:

* Every change to the specification of an exported interface, either external or private, requires a CSR request regardless of the size of the change.

This is an extension of the CSR charter to cover additional types of  interfaces (e.g., command-line flags) and to cover private as well as external interfaces.

* Every change to the use of an imported interface, either external or private, requires a CSR request when the change is at the level of the interface itself.
* Every change that carries nontrivial compatibility risk, regardless of whether or not an exported or imported interface is changed, requires a CSR request so that the potential incompatibility can be assessed and documented.

CSR Wiki is here

If you are changing an interface, you must have an approved CSR request associated with it before integration.

:::{.note}
When figuring out the Dev plan, make sure you understand our engineering processes and account for time needed for code reviews and CSR approvals.
:::

### Keep the JEP up-to-date!

The JEP is a living document.  Update the JEP to match what is being done!

## Ready to move JEP to Propose to Target

The following work must be completed before a JEP can be moved to Propose to Target

* All expected development and test work must be completed satisfactorily (no P1, P2 bugs, small # of P3s)
  * All CSRs and code reviews have been completed
  * All tests have been written and executed, and the integration criteria has been satisfied
  * Approval for new or updated 3rd party software must be completed before any code is pushed, and updates to license files must be part of the integration.
  * There should be no new test failures or increase in incremental test failures.
  * All source and tests should be ready to be pushed into the repositories.
* Sub-tasks must be completed
* Area lead has Endorsed the JEP (send mail to the area lead to request the endorsement of your JEP)
* If required, performance work must be completed before the JEP can be moved to Propose to Target
* Set the JEP Fix Version(s) field to the requested release value.
* You must be ready to integrate soon after the JEP is moved to Targeted (i.e. there is no other work or approval pending)

When the above steps are completed, the JEP can be moved to Propose to Target

## JEP Status: Propose to Target  

The Project Lead will review JEPs that have a status of Propose to Target and will move them to Targeted once approved. JEPs typically need to be posted for 1 week on the JDK release mailing list before it will get moved to Targeted.  The Project Lead may move your JEP back to Candidate status if requesting more information.

## JEP Status: Targeted

You are approved to push into the main repository!

### Integration

1. Integration means that the feature is 'feature complete'.  Only minor bug fixes to the feature or to unit tests should be needed after this stage.  (Of course, there may be feedback that requires changes to the API, implementation or tests)
1. The JEP can be marked Integrated when the code and tests have been pushed to the JDK dev forest.
1. Monitor build and testing results after your push to ensure that your integration did not cause any build or test failures

:::{.note}
Do not use JEP issue numbers when pushing back into mercurial. JEPs have a different workflow (e.g. no "Resolved in Build" field) and aren't recognized by jcheck.
:::

## FAQ

* Remember JEPs are living documents. Please keep them up-to-date. If there are major changes, go back to your stakeholders (including Reviewer and Endorser) and let them know.
* If a JEP will not be delivered for this release, make sure that your management and stakeholders are aware and then change the fixVersion to remove the current release. JEPs that are "Proposed to Target" should be reverted to "Candidate". JEPs that are "Targeted" will need their state changed by the OpenJDK lead (Mark).

::: {.box}
[To the top](#){.boxheader}
:::
